---
import { Icon } from 'astro-icon/components';
// import { SITE } from 'astrowind:config';
// import { getHomePermalink } from '~/utils/permalinks';

interface Link {
  text?: string;
  href?: string;
  ariaLabel?: string;
  icon?: string;
}

interface Links {
  title?: string;
  links: Array<Link>;
}

export interface Props {
  links: Array<Links>;
  secondaryLinks: Array<Link>;
  socialLinks: Array<Link>;
  footNote?: string;
  theme?: string;
}

const { socialLinks = [], secondaryLinks = [], footNote = '', theme = 'light' } = Astro.props;
---

<footer class:list={[{ dark: theme === 'dark' }, 'relative not-prose']}>
  <div class="dark:bg-dark absolute inset-0 pointer-events-none" aria-hidden="true"></div>
  <div class="relative max-w-7xl mx-auto px-4 sm:px-6 dark:text-slate-300">
    <!-- Divider -->
    <hr class="border-gray-200 dark:border-slate-800 my-6 md:my-8" />

    <!-- Social row -->
    {
      socialLinks?.length ? (
        <ul class="flex items-center justify-start gap-2 md:gap-3 mb-4 md:mb-5">
          {socialLinks.map(({ ariaLabel, href, text, icon }) => (
            <li>
              <a
                class="text-gray-400 hover:text-primary focus:outline-none focus:ring-2 focus:ring-primary/30 rounded-lg text-sm p-2 inline-flex items-center transition filter grayscale hover:grayscale-0"
                aria-label={ariaLabel}
                href={href}
              >
                {icon && <Icon name={icon} class="w-5 h-5" />}
                <Fragment set:html={text} />
              </a>
            </li>
          ))}
        </ul>
      ) : (
        ''
      )
    }

    <!-- Copyright -->
    <div class="text-[13px] text-muted dark:text-gray-400 mb-2.5">
      <Fragment set:html={footNote} />
    </div>

    <!-- Legal links -->
    <div class="text-[13px] text-muted dark:text-gray-400">
      {
        secondaryLinks.map(({ text, href }, index) => (
          <>
            {index !== 0 ? ' Â· ' : ''}
            <a class="hover:text-primary hover:underline transition" href={href} set:html={text} />
          </>
        ))
      }
    </div>

    <!-- Bottom spacing -->
    <div class="pb-10 md:pb-16"></div>
  </div>
</footer>
